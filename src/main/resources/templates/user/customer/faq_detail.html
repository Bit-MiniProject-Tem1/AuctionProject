<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/layout}">
<head>
    <title>자주 묻는 질문 - 상세조회</title>
<!--    <link rel="stylesheet" type="text/css" href="/css/my/admin.css">-->
<!--    <link rel="stylesheet" th:href="@{/css/user/admin.css}">-->


    <th:block layout:fragment="css">
<!--        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">-->
        <link rel="stylesheet" th:href="@{/css/admin/admin.css}">
    </th:block>
    <th:block layout:fragment="script">
        <script>
            /*$(() => {
                console.log($(".text_area")[0].scrollHeight);
                console.log($("#title_box").css('height'));

                if($(".text_area")[0].scrollHeight > 30) {
                    $("#title_box").css('height', 'auto');
                    $("#title_box").height($(".text_area")[0].scrollHeight);
                }
            });*/



            $(() => {
                let viewBox = document.querySelectorAll(".view_box");
                for (let i=0; i<viewBox.length; i++) {

                    let id = viewBox[i].getAttribute('id');
                    let fontSize = window.getComputedStyle(viewBox[i]).getPropertyValue("font-size").replace('px', '');
                    let textareaScrollHeight = $("#" + id + ">.text_area")[0].scrollHeight;
                    let textarea_height = window.getComputedStyle($("#" + id + ">.text_area")[0]).getPropertyValue("height");
                    let resize = textareaScrollHeight - fontSize;

                    console.log("@@ " + $(".text_area")[0].scrollHeight);

                    console.log("fontSize : " + fontSize);
                    console.log("resize : " + resize);

                    console.log("textareaScrollHeight : " + textareaScrollHeight);
                    console.log("((fontSize - 1) * 3) + 7 = " + (((fontSize - 1) * 3) + 7));

                    if(textareaScrollHeight > (((fontSize - 1) * 3) + 7)) {
                        $("#" + id).height(resize);
                    } else {
                        // $("#" + id + ">.text_area")[0].paddingTop = 0;
                        // $("#" + id + ">.text_area")[0].paddingBottom = 0;
                        // console.log("paddingTop before : " + window.getComputedStyle(viewBox[i]).getPropertyValue("padding-top"));
                        console.log("paddingTop before : " + $("#" + id).css("padding-top"));
                        $("#" + id).css("padding-top", "5px");
                        $("#" + id).css("padding-bottom", "5px");
                        console.log("paddingTop after : " + $("#" + id).css("padding-top"));
                        console.log("textarea height : " + textarea_height);
                        $("#" + id).height(fontSize + $("#" + id).paddingTop + $("#" + id).paddingBottom);
                        console.log("textareaScrollHeight : " + textareaScrollHeight);
                        console.log("###");

                    }

                    console.log("viewbox id = " + "#" + id);

                    console.log("------------------------------------------");

                    // if($(".text_area")[0].scrollHeight > 30) {
                    //     $("#" + id).css('height', 'auto');
                    //     $("#" + id).height($("#" + id + ">.text_area")[0].scrollHeight);
                    // }
                }
            });


            /*$(() => {
                var viewBox = document.querySelectorAll(".view_box");

                for (var i=0; i<viewBox.length; i++) {
                    var id = viewBox[i].getAttribute('id');

                    console.log("id = " + id);

                    console.log($("#" + id + ">.text_area")[0].scrollHeight);
                    console.log("#"+id);

                    if($(".text_area")[0].scrollHeight > 30) {
                            $("#" + id).css('height', 'auto');
                            $("#" + id).height($("#" + id + ">.text_area")[0].scrollHeight);
                        }
                }
            });*/

        </script>
    </th:block>
</head>
<body>
<div class="content_area" layout:fragment="content" >
    <div class="title_area">
        <div class="title">
            <strong>자주 묻는 질문 - 상세조회</strong>
        </div>
    </div>
    <div>
        <div class="detailView_area">
            <form id="detailViewForm" action="" method="post">
                <div id="category">카테고리명</div>
                <div class="detail_item">
                    <div>
                        <div class="item_label_area">
                            <!--<svg xmlns="http://www.w3.org/2000/svg" colof="red" width="10" height="10"
                                 fill="currentColor" class="bi bi-circle-fill" viewBox="0 0 16 16" >
                                <circle cx="8" cy="8" r="8"/>
                            </svg>-->
                            <div class="label_icon d-flex align-items-center justify-content-center">
                                <i class="bi bi-record-fill"></i>
                            </div>
                            <strong>
                                <label class="item_label">제목</label>
                            </strong>
                        </div>
                        <div class="view_box" id="title_box" style="height: 30px;">
                            <textarea class="text_area" style="height: auto;"></textarea>
                        </div>
                    </div>
                </div>
                <div class="detail_item">
                    <div>
                        <div class="item_label_area">
                            <!--<svg xmlns="http://www.w3.org/2000/svg" colof="red" width="10" height="14"
                                 fill="currentColor" class="bi bi-circle-fill" viewBox="0 0 16 16">
                                <circle cx="8" cy="8" r="8"/>
                            </svg>-->
                            <div class="label_icon d-flex align-items-center justify-content-center">
                                <i class="bi bi-record-fill"></i>
                            </div>
                            <strong>
                                <label class="item_label">내용</label>
                            </strong>
                        </div>
                        <div class="view_box" id="content_box" style="height: 400px;">
                            <textarea class="text_area"></textarea>
                        </div>
                    </div>
                </div>
                <div class="detail_item">
                    <div>
                        <div class="item_label_area">
                            <!--<svg xmlns="http://www.w3.org/2000/svg" colof="red" width="10" height="14"
                                 fill="currentColor" class="bi bi-circle-fill" viewBox="0 0 16 16">
                                <circle cx="8" cy="8" r="8"/>
                            </svg>-->
                            <div class="label_icon d-flex align-items-center justify-content-center">
                                <i class="bi bi-record-fill"></i>
                            </div>
                            <strong>
                                <label class="item_label">첨부파일</label>
                            </strong>
                        </div>
                        <div class="view_box" id="file_box" style="height: 30px;">
                            <textarea class="text_area"></textarea>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
</body>
</html>